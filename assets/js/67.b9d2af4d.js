(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{542:function(a,t,e){"use strict";e.r(t);var s=e(4),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("Boxx"),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#èƒŒæ™¯ä»‹ç»"}},[a._v("èƒŒæ™¯ä»‹ç»")])]),t("li",[t("a",{attrs:{href:"#é—®é¢˜ç°è±¡ä¸åˆæ­¥è¯Šæ–­"}},[a._v("é—®é¢˜ç°è±¡ä¸åˆæ­¥è¯Šæ–­")])]),t("li",[t("a",{attrs:{href:"#heap-dump-åˆ†æè¿‡ç¨‹"}},[a._v("Heap Dump åˆ†æè¿‡ç¨‹")]),t("ul",[t("li",[t("a",{attrs:{href:"#_1-oom-çº¿ç¨‹æº"}},[a._v("1. OOM çº¿ç¨‹æº")])]),t("li",[t("a",{attrs:{href:"#_2-å¤§é‡-byte-å †ç§¯"}},[a._v("2. å¤§é‡ `byte[]` å †ç§¯")])]),t("li",[t("a",{attrs:{href:"#_3-gc-root-å¼•ç”¨é“¾æŒ‡å‘-skywalking"}},[a._v("3. GC Root å¼•ç”¨é“¾æŒ‡å‘ SkyWalking")])])])]),t("li",[t("a",{attrs:{href:"#skywalking-agent-é…ç½®å®¡æŸ¥"}},[a._v("SkyWalking Agent é…ç½®å®¡æŸ¥")])]),t("li",[t("a",{attrs:{href:"#æœ€ç»ˆæ ¹å› "}},[a._v("æœ€ç»ˆæ ¹å› ")])]),t("li",[t("a",{attrs:{href:"#è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–å»ºè®®"}},[a._v("è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–å»ºè®®")])]),t("li",[t("a",{attrs:{href:"#ç»éªŒæ€»ç»“"}},[a._v("ç»éªŒæ€»ç»“")])]),t("li",[t("a",{attrs:{href:"#é™„å½•"}},[a._v("é™„å½•")]),t("ul",[t("li",[t("a",{attrs:{href:"#jvm-å¯åŠ¨å‚æ•°å»ºè®®"}},[a._v("JVM å¯åŠ¨å‚æ•°å»ºè®®ï¼š")])]),t("li",[t("a",{attrs:{href:"#åˆ†æå·¥å…·æ¨è"}},[a._v("åˆ†æå·¥å…·æ¨è")])])])]),t("li",[t("a",{attrs:{href:"#æœ€å"}},[a._v("æœ€å")])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"èƒŒæ™¯ä»‹ç»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯ä»‹ç»"}},[a._v("#")]),a._v(" èƒŒæ™¯ä»‹ç»")]),a._v(" "),t("p",[a._v("åœ¨ä¸€æ¬¡å‹æµ‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ "),t("strong",[a._v("Spring Cloud Gateway")]),a._v(" å‡ºç°äº†é¢‘ç¹å®•æœºï¼Œè¡¨ç°ä¸ºï¼š")]),a._v(" "),t("ul",[t("li",[a._v("è¯·æ±‚å“åº”è¶…æ—¶")]),a._v(" "),t("li",[a._v("å®¹å™¨æ„å¤–é‡å¯")]),a._v(" "),t("li",[a._v("æ— æ˜æ˜¾å¼‚å¸¸å †æ ˆè¾“å‡º")]),a._v(" "),t("li",[a._v("æ—¥å¿—è®°å½•ä¸å®Œæ•´ç”šè‡³ç¼ºå¤±")])]),a._v(" "),t("p",[a._v("åˆæ­¥æ€€ç–‘ä¸ºå†…å­˜æ³„æ¼æˆ– JVM é…ç½®é—®é¢˜ï¼Œéšå³å¯åŠ¨ä¸€è½®å®Œæ•´çš„æ’æŸ¥æµç¨‹ã€‚")]),a._v(" "),t("blockquote",[t("p",[a._v("æœåŠ¡å·²å¼€å¯ "),t("a",{attrs:{href:"https://skywalking.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Apache SkyWalking"),t("OutboundLink")],1),a._v(" Agentï¼Œç”¨äºé‡‡é›†é“¾è·¯è¿½è¸ªã€JVM æŒ‡æ ‡ä¸åº”ç”¨æ—¥å¿—ã€‚ç”±äºå®•æœºé¢‘ç¹ï¼Œå†³å®šæ·±å…¥å®šä½ "),t("strong",[a._v("æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼")]),a._v("ã€‚")])]),a._v(" "),t("h2",{attrs:{id:"é—®é¢˜ç°è±¡ä¸åˆæ­¥è¯Šæ–­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜ç°è±¡ä¸åˆæ­¥è¯Šæ–­"}},[a._v("#")]),a._v(" é—®é¢˜ç°è±¡ä¸åˆæ­¥è¯Šæ–­")]),a._v(" "),t("p",[t("strong",[a._v("ç°è±¡ï¼š")])]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Gateway åº”ç”¨å¯åŠ¨å‚æ•°åˆå§‹ä¸º  "),t("code",[a._v("-Xmx512m")]),a._v(" ååˆå¢åŠ åˆ° "),t("code",[a._v("-Xmx1024m")])])]),a._v(" "),t("li",[t("p",[a._v("å®¹å™¨åœ¨é«˜å¹¶å‘å‹æµ‹çº¦ 15 åˆ†é’Ÿå†…å¼‚å¸¸é€€å‡º")])]),a._v(" "),t("li",[t("p",[t("code",[a._v('docker inspect dky-gateway | grep -i "oom"')]),a._v(" æ˜¾ç¤º "),t("code",[a._v("OOMKilled=false")]),a._v("ï¼Œè¯´æ˜å¹¶éå®¹å™¨å¤–éƒ¨ OOM Killer æ‰€è‡´")])]),a._v(" "),t("li",[t("p",[a._v("éšåä½¿ç”¨ "),t("code",[a._v("top")]),a._v(" æŸ¥çœ‹ Java è¿›ç¨‹å†…å­˜å’Œ CPU ä½¿ç”¨æƒ…å†µï¼š")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx1024m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nRES "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(".3g\nCPU "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("500")]),a._v("%+\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("å‡æ˜¾ç¤ºå†…å­˜å¿«é€Ÿå¢é•¿è‡³è¿‘ 1.3GBï¼Œè¶…å‡ºäº† "),t("code",[a._v("-Xmx1024m")]),a._v(" é™åˆ¶ï¼Œææœ‰å¯èƒ½æ˜¯ JVM å†…å­˜æ³„æ¼ã€‚")])])]),a._v(" "),t("p",[t("strong",[a._v("åˆæ­¥æ’æŸ¥æ–¹å‘ï¼š")])]),a._v(" "),t("ul",[t("li",[t("p",[a._v("GC æ—¥å¿—æœªæ˜¾ç¤º FullGC")])]),a._v(" "),t("li",[t("p",[a._v("æœªæ£€æµ‹åˆ°å®¹å™¨å¤–éƒ¨ OOM æ€æ­»ç—•è¿¹")])]),a._v(" "),t("li",[t("p",[a._v("æ€€ç–‘ä¸ºåº”ç”¨å†…éƒ¨å†…å­˜æ³„æ¼ï¼Œæ•…æ‰‹åŠ¨ç”Ÿæˆ Heap Dump ("),t("code",[a._v(".hprof")]),a._v(") æ–‡ä»¶")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jcmd "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" GC.heap_dump /home/logs/gateway.hprof\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])]),a._v(" "),t("h2",{attrs:{id:"heap-dump-åˆ†æè¿‡ç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#heap-dump-åˆ†æè¿‡ç¨‹"}},[a._v("#")]),a._v(" Heap Dump åˆ†æè¿‡ç¨‹")]),a._v(" "),t("p",[a._v("ä½¿ç”¨ VisualVM è½½å…¥ "),t("code",[a._v(".hprof")]),a._v(" æ–‡ä»¶åï¼Œå‘ç°ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š")]),a._v(" "),t("p",[t("img",{attrs:{src:"/znote/img/backend/image-20250609171844186.png",alt:"image-20250609171844186.png"}})]),a._v(" "),t("h3",{attrs:{id:"_1-oom-çº¿ç¨‹æº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-oom-çº¿ç¨‹æº"}},[a._v("#")]),a._v(" 1. OOM çº¿ç¨‹æº")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"SkywalkingAgent-10-ProfileSendSnapshotService-0" daemon tid=13 RUNNABLE\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("è¿™æ˜¯ SkyWalking çš„ profile åŠŸèƒ½çº¿ç¨‹ï¼Œè´Ÿè´£æ”¶é›† trace æ ·æœ¬å¹¶å‘é€å¿«ç…§ â†’ "),t("strong",[a._v("é«˜åº¦å¯ç–‘æ˜¯å†…å­˜æ³„æ¼/ç§¯å‹ç‚¹")]),a._v("ã€‚")]),a._v(" "),t("h3",{attrs:{id:"_2-å¤§é‡-byte-å †ç§¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¤§é‡-byte-å †ç§¯"}},[a._v("#")]),a._v(" 2. "),t("strong",[a._v("å¤§é‡ "),t("code",[a._v("byte[]")]),a._v(" å †ç§¯")])]),a._v(" "),t("ul",[t("li",[a._v("å ç”¨å†…å­˜ï¼š"),t("strong",[a._v("422MB")]),a._v("ï¼ˆ55.3%ï¼‰")]),a._v(" "),t("li",[a._v("å®ä¾‹æ•°ï¼š9.3 ä¸‡")]),a._v(" "),t("li",[a._v("å…¨éƒ¨ retainedï¼šè¯´æ˜æœªè¢« GC å›æ”¶")])]),a._v(" "),t("h3",{attrs:{id:"_3-gc-root-å¼•ç”¨é“¾æŒ‡å‘-skywalking"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-gc-root-å¼•ç”¨é“¾æŒ‡å‘-skywalking"}},[a._v("#")]),a._v(" 3. "),t("strong",[a._v("GC Root å¼•ç”¨é“¾æŒ‡å‘ SkyWalking")])]),a._v(" "),t("p",[a._v("æˆ‘ä»¬ç‚¹å‡»æŸä¸ª "),t("code",[a._v("byte[]")]),a._v(" å®ä¾‹æŸ¥çœ‹å¼•ç”¨é“¾ï¼š")]),a._v(" "),t("p",[t("img",{attrs:{src:"/znote/img/backend/image-20250609171742530.png",alt:"image-20250609171742530.png"}})]),a._v(" "),t("div",{staticClass:"language-less line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-less"}},[t("code",[a._v("sun.nio.ch.EPollArrayWrapper#eventsLow [GC root "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" Java frame]\n  â””â”€â”€ sun.nio.ch.EPollSelectorImpl#pollWrapper\n      â””â”€â”€ org.apache.skywalking.apm.dependencies.io.netty.channel.nio.NioEventLoop#unwrappedSelector\n          â””â”€â”€ byte[]\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("å³ï¼š"),t("strong",[a._v("SkyWalking Agent å†…éƒ¨ä½¿ç”¨çš„ Netty Selector äº‹ä»¶ç¼“å†²æœªé‡Šæ”¾ï¼Œå¯¼è‡´å†…å­˜æŒç»­å¢é•¿ï¼Œæœ€ç»ˆè§¦å‘ OOM")]),a._v("ã€‚")]),a._v(" "),t("h2",{attrs:{id:"skywalking-agent-é…ç½®å®¡æŸ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#skywalking-agent-é…ç½®å®¡æŸ¥"}},[a._v("#")]),a._v(" SkyWalking Agent é…ç½®å®¡æŸ¥")]),a._v(" "),t("p",[a._v("åœ¨åˆ†æå…¶ "),t("code",[a._v("agent.config")]),a._v(" åç¡®è®¤ï¼š")]),a._v(" "),t("ul",[t("li",[a._v("å¼€å¯äº† "),t("code",[a._v("profile.active=true")]),a._v(" â†’ Profile å¿«ç…§ä»»åŠ¡å ç”¨å¤§é‡å†…å­˜")]),a._v(" "),t("li",[a._v("é»˜è®¤å¼€å¯ trace é‡‡æ · "),t("code",[a._v("agent.sample_n_per_3_secs=-1")])]),a._v(" "),t("li",[a._v("æœªè®¾ç½® "),t("code",[a._v("keep_tracing=false")]),a._v("ï¼ŒOAP ä¸å¯ç”¨æ—¶ä¾ç„¶ç¼“å­˜æ•°æ®")]),a._v(" "),t("li",[a._v("æœªå…³é—­ "),t("code",[a._v("meter.active=false")]),a._v("ï¼Œé‡‡é›† JVM æŒ‡æ ‡å¢åŠ å†…å­˜å‹åŠ›")])]),a._v(" "),t("p",[a._v("è¿™äº›é…ç½®ä¼šåœ¨ OAP ä¸å¯ç”¨æˆ–å‘é€å¤±è´¥æ—¶ï¼Œå¯¼è‡´å¤§é‡ trace æ•°æ®å †ç§¯åœ¨æœ¬åœ°ç¼“å­˜ï¼ˆHeapByteBufferã€byte[]ï¼‰ã€‚")]),a._v(" "),t("h2",{attrs:{id:"æœ€ç»ˆæ ¹å› "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ç»ˆæ ¹å› "}},[a._v("#")]),a._v(" æœ€ç»ˆæ ¹å› ")]),a._v(" "),t("p",[a._v("SkyWalking Agent åœ¨å¼€å¯ profile åŠŸèƒ½ + é»˜è®¤ trace é‡‡æ ·æ¡ä»¶ä¸‹ï¼Œå› è¿æ¥ä¸ä¸Š OAP æˆ–å¤„ç†ä¸åŠæ—¶ï¼Œé€ æˆ Netty Selector ä¸­çš„æ•°æ®ç¼“å†²æ— æ³•åŠæ—¶æ¸…ç©ºï¼Œå¯¼è‡´ï¼š")]),a._v(" "),t("ul",[t("li",[a._v("å †å†… "),t("code",[a._v("byte[]")]),a._v(" é•¿æœŸå ç”¨æ— æ³•å›æ”¶")]),a._v(" "),t("li",[a._v("å †å†…ç¼“å†²ä½“ç§¯éšå‹æµ‹å‰§å¢")]),a._v(" "),t("li",[a._v("æœ€ç»ˆè§¦å‘ OOM")])]),a._v(" "),t("h2",{attrs:{id:"è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–å»ºè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–å»ºè®®"}},[a._v("#")]),a._v(" è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–å»ºè®®")]),a._v(" "),t("p",[a._v("å°†å¦‚ä¸‹é…ç½®å†™å…¥ "),t("code",[a._v("agent.config")]),a._v("ï¼Œå¹¶é‡å¯æœåŠ¡ï¼š")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("profile.active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("false                   # ç¦ç”¨ profile æ¨¡å—ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("agent.sample_n_per_3_secs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0            # å…³é—­ trace é‡‡æ ·")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("agent.keep_tracing")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("false               # æ–­å¼€åä¸ç¼“å­˜ trace")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("agent.span_limit_per_segment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("50        # é™åˆ¶ trace å•ä½“å¤§å°")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("meter.active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("false                     # å…³é—­ JVM æŒ‡æ ‡é‡‡é›†ï¼ˆè§†æƒ…å†µï¼‰")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥ï¼š")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" SW_AGENT_SAMPLE=0\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" SW_AGENT_PROFILE_ACTIVE=false\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" SW_AGENT_KEEP_TRACING=false\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" SW_AGENT_SPAN_LIMIT=50\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" SW_METER_ACTIVE=false\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("ul",[t("li",[a._v("SkyWalking Agent åº”æ ¹æ®å®é™… OAP çŠ¶æ€å†³å®šç¼“å­˜ç­–ç•¥")]),a._v(" "),t("li",[a._v("ç›‘æ§å·¥å…·å»ºè®®æä¾›ç¼“å†²åŒºé™æµèƒ½åŠ›ï¼Œé˜²æ­¢æ³„æ¼")]),a._v(" "),t("li",[a._v("å»ºè®®å¼€å¯ GC æ—¥å¿—å’Œ "),t("code",[a._v("-XX:+HeapDumpOnOutOfMemoryError")]),a._v("ï¼Œä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜")])]),a._v(" "),t("h2",{attrs:{id:"ç»éªŒæ€»ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»éªŒæ€»ç»“"}},[a._v("#")]),a._v(" ç»éªŒæ€»ç»“")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("æ•™è®­")]),a._v(" "),t("th",[a._v("å†…å®¹")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("â˜ ï¸ é»˜è®¤é…ç½®é£é™©")]),a._v(" "),t("td",[a._v("SkyWalking é»˜è®¤å¼€å¯ Profile/Trace åŠŸèƒ½ï¼Œåœ¨æ—  OAP çš„åœºæ™¯ä¸‹å¯èƒ½ä¸¥é‡æ³„æ¼å†…å­˜")])]),a._v(" "),t("tr",[t("td",[a._v("ğŸ” å¯è§‚æµ‹æ€§ â‰  ç¨³å®šæ€§")]),a._v(" "),t("td",[a._v("å³ä½¿æ˜¯ç›‘æ§å·¥å…·ï¼Œä¹Ÿå¯èƒ½å› é…ç½®ä¸å½“æ‹–å®æ ¸å¿ƒä¸šåŠ¡")])]),a._v(" "),t("tr",[t("td",[a._v("ğŸ’¡ æŒç»­ç›‘æ§ agent èµ„æºå ç”¨")]),a._v(" "),t("td",[a._v("ä½¿ç”¨ jstatã€jmapã€VisualVM ç­‰å·¥å…·è¿›è¡Œå®šæœŸå›é¡¾")])]),a._v(" "),t("tr",[t("td",[a._v("ğŸ§¹ ä¿æŒé…ç½®ç²¾ç®€")]),a._v(" "),t("td",[a._v("ç›‘æ§åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®å…³é—­æ— å¿…è¦çš„ç‰¹æ€§ï¼ˆå¦‚ profileï¼‰")])])])]),a._v(" "),t("ul",[t("li",[a._v("SkyWalking agent åœ¨å¼€å¯ profile åŠŸèƒ½æ—¶ï¼Œä¼šé€šè¿‡ Netty å¯åŠ¨åå°çº¿ç¨‹ç»´æŠ¤è¿æ¥")]),a._v(" "),t("li",[a._v("è‹¥è¿æ¥å¤±è´¥æˆ–ç½‘ç»œä¸é€šï¼Œtrace æ•°æ®ä¼šç¼“å­˜åœ¨å †å†… â†’ "),t("strong",[a._v("æ½œåœ¨é«˜é£é™©")])]),a._v(" "),t("li",[a._v("å†…å­˜æ³„æ¼ä¸ç­‰äºå¯¹è±¡æ— ç”¨ï¼Œè€Œæ˜¯â€œ"),t("strong",[a._v("å¯¹è±¡æœ‰ç”¨ä½†æ°¸è¿œä¸ä¼šé‡Šæ”¾")]),a._v("â€")])]),a._v(" "),t("h2",{attrs:{id:"é™„å½•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™„å½•"}},[a._v("#")]),a._v(" é™„å½•")]),a._v(" "),t("h3",{attrs:{id:"jvm-å¯åŠ¨å‚æ•°å»ºè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm-å¯åŠ¨å‚æ•°å»ºè®®"}},[a._v("#")]),a._v(" JVM å¯åŠ¨å‚æ•°å»ºè®®ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx1024m")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:+HeapDumpOnOutOfMemoryError")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:HeapDumpPath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/logs\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:+ExitOnOutOfMemoryError")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:+PrintGCDetails")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:+PrintGCDateStamps")]),a._v("\n-Xloggc:/logs/gc.log\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h3",{attrs:{id:"åˆ†æå·¥å…·æ¨è"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†æå·¥å…·æ¨è"}},[a._v("#")]),a._v(" åˆ†æå·¥å…·æ¨è")]),a._v(" "),t("ul",[t("li",[a._v("Heap Dump åˆ†æï¼šVisualVM / Eclipse MAT")]),a._v(" "),t("li",[a._v("å®æ—¶ç›‘æ§ï¼šjstat, jstack, jcmd")]),a._v(" "),t("li",[a._v("å®¹å™¨å±‚æ—¥å¿—æŸ¥çœ‹ï¼š"),t("code",[a._v("docker logs")]),a._v(", "),t("code",[a._v("docker inspect")])])]),a._v(" "),t("h2",{attrs:{id:"æœ€å"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœ€å"}},[a._v("#")]),a._v(" æœ€å")]),a._v(" "),t("p",[a._v("è¿™æ¬¡äº‹æ•…ä¸ºæˆ‘ä»¬æ•²å“äº†ä¸€ä¸ªè­¦é’Ÿï¼š"),t("strong",[a._v("å³ä½¿æ˜¯æˆç†Ÿçš„æ¢é’ˆå·¥å…·ï¼Œåœ¨æœªæ­£ç¡®é…ç½®ä¸‹ä¹Ÿå¯èƒ½å¸¦æ¥ç¾éš¾æ€§åæœ")]),a._v("ã€‚\nåŠ¡å¿…åšåˆ°ï¼š â€œ"),t("strong",[a._v("ç›‘æ§è‡ªèº«ä¹Ÿéœ€è¢«ç›‘æ§ï¼Œç¨³å®šæ€§æ°¸è¿œä¼˜å…ˆäºå¯è§‚å¯Ÿæ€§")]),a._v("ã€‚â€")]),a._v(" "),t("Reward")],1)}),[],!1,null,null,null);t.default=r.exports}}]);