(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{588:function(a,s,e){"use strict";e.r(s);var t=e(4),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("Boxx"),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#基础命令"}},[a._v("基础命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#get"}},[a._v("get")])]),s("li",[s("a",{attrs:{href:"#create"}},[a._v("create")])]),s("li",[s("a",{attrs:{href:"#expose"}},[a._v("expose")])]),s("li",[s("a",{attrs:{href:"#run"}},[a._v("run")])]),s("li",[s("a",{attrs:{href:"#set"}},[a._v("set")])]),s("li",[s("a",{attrs:{href:"#explain"}},[a._v("explain")])]),s("li",[s("a",{attrs:{href:"#delete"}},[a._v("delete")])])])]),s("li",[s("a",{attrs:{href:"#部署命令"}},[a._v("部署命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#rollout"}},[a._v("rollout")])]),s("li",[s("a",{attrs:{href:"#scale"}},[a._v("scale")])]),s("li",[s("a",{attrs:{href:"#autoscale"}},[a._v("autoscale")])])])]),s("li",[s("a",{attrs:{href:"#集群管理命令"}},[a._v("集群管理命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#cordon、drain、uncordon"}},[a._v("cordon、drain、uncordon")])]),s("li",[s("a",{attrs:{href:"#cluster-info"}},[a._v("cluster-info")])]),s("li",[s("a",{attrs:{href:"#top"}},[a._v("top")])]),s("li",[s("a",{attrs:{href:"#taint"}},[a._v("taint")])]),s("li",[s("a",{attrs:{href:"#certificate"}},[a._v("certificate")])])])]),s("li",[s("a",{attrs:{href:"#故障诊断和调试命令"}},[a._v("故障诊断和调试命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#describe"}},[a._v("describe")])]),s("li",[s("a",{attrs:{href:"#logs"}},[a._v("logs")])]),s("li",[s("a",{attrs:{href:"#exec"}},[a._v("exec")])]),s("li",[s("a",{attrs:{href:"#port-forward"}},[a._v("port-forward")])]),s("li",[s("a",{attrs:{href:"#cp"}},[a._v("cp")])]),s("li",[s("a",{attrs:{href:"#auth"}},[a._v("auth")])]),s("li",[s("a",{attrs:{href:"#attach"}},[a._v("attach")])])])]),s("li",[s("a",{attrs:{href:"#高级命令"}},[a._v("高级命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#replace"}},[a._v("replace")])]),s("li",[s("a",{attrs:{href:"#apply"}},[a._v("apply")])]),s("li",[s("a",{attrs:{href:"#patch"}},[a._v("patch")])]),s("li",[s("a",{attrs:{href:"#convert"}},[a._v("convert")])])])]),s("li",[s("a",{attrs:{href:"#设置命令"}},[a._v("设置命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#label"}},[a._v("label")])]),s("li",[s("a",{attrs:{href:"#annotate"}},[a._v("annotate")])]),s("li",[s("a",{attrs:{href:"#completion"}},[a._v("completion")])])])]),s("li",[s("a",{attrs:{href:"#其他命令"}},[a._v("其他命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#api-versions"}},[a._v("api-versions")])]),s("li",[s("a",{attrs:{href:"#api-resources"}},[a._v("api-resources")])]),s("li",[s("a",{attrs:{href:"#config"}},[a._v("config")])]),s("li",[s("a",{attrs:{href:"#help"}},[a._v("help")])]),s("li",[s("a",{attrs:{href:"#version"}},[a._v("version")])])])])])]),s("p"),a._v(" "),s("p",[a._v("kubectl是Kubernetes集群的命令行工具，您可以将kubectl安装在任意一台机器上，通过kubectl命令操作Kubernetes集群。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kubectl cluster-info")]),a._v("\nKubernetes master "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("is")]),a._v(" running at https:"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//*.*.*.*:5443")]),a._v("\nCoreDNS "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("is")]),a._v(" running at https:"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//*.*.*.*:5443/api/v1/namespaces/kube-system/services/coredns:dns/proxy")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("To")]),a._v(" further debug "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" diagnose cluster problems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'kubectl cluster-info dump'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("执行kubectl get nodes可以查看集群中的节点信息。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kubectl get nodes")]),a._v("\nNAME            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("STATUS")]),a._v("    ROLES     AGE       VERSION\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".153")]),a._v("   Ready     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("m        v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.6")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("r1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("B001"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.30")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".207")]),a._v("   Ready     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("m        v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.6")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("r1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("B001"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.30")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".221")]),a._v("   Ready     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("m        v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.6")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("r1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("B001"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.30")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("更多kubectl命令请参考"),s("a",{attrs:{href:"https://kubernetes.io/zh-cn/docs/reference/kubectl/quick-reference/",target:"_blank",rel:"noopener noreferrer"}},[a._v("kubectl 快速参考"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("h2",{attrs:{id:"基础命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础命令"}},[a._v("#")]),a._v(" 基础命令")]),a._v(" "),s("h4",{attrs:{id:"get"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get"}},[a._v("#")]),a._v(" get")]),a._v(" "),s("p",[a._v("get命令用于获取集群的一个或一些资源的详细信息。")]),a._v(" "),s("p",[a._v("该命令可以列出集群所有资源的详细信息，包括集群节点、运行的Pod、Deployment、Service等。")]),a._v(" "),s("p",[s("strong",[a._v("须知：")])]),a._v(" "),s("p",[a._v("集群中可以创建多个命名空间，未指定命名空间的情况下，默认指定为--namespace=default，即查询default命名空间下的资源。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("获取所有Pod的详细信息：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o wide\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("获取所有命名空间下的运行的所有Pod：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--all-namespaces")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("获取所有命名空间下的运行的所有Pod的标签：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--show-labels")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("获取该节点的所有命名空间：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get namespace\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("说明：")])]),a._v(" "),s("p",[a._v("类似可以使用“kubectl get svc”，“kubectl get nodes”，“kubectl get deploy”等获取其他资源的信息。")]),a._v(" "),s("p",[a._v("以YAML格式输出Pod的详细信息：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o yaml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("以JSON格式输出Pod的详细信息：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o json\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod rc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("btv4j "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("custom"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("columns")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("LABELS:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("labels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("app\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("说明：")])]),a._v(" "),s("p",[a._v("其中LABELS为显示的列标题，可以自己设置，“.metadata.labels.app”为查询的数据需要按照之前的YAML或JSON获取。")]),a._v(" "),s("h4",{attrs:{id:"create"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create"}},[a._v("#")]),a._v(" create")]),a._v(" "),s("p",[a._v("create命令用于根据文件或输入创建集群资源。")]),a._v(" "),s("p",[a._v("如果已经定义了相应资源的YAML或JSON文件，直接使用以下命令即可创建文件内定义的资源。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"expose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expose"}},[a._v("#")]),a._v(" expose")]),a._v(" "),s("p",[a._v("expose将一个资源包括Pod、Service、Deployment等公开为一个新的Service。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl expose deployment "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--port=81 --type=NodePort --target-port=80 --name=<service-name>")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("说明：")])]),a._v(" "),s("p",[a._v("以上命令会给Deployment创建一个服务，--port为服务暴露出去的端口，--type为服务类型，--target-port为服务对应后端Pod的端口，port提供了集群内部访问服务的入口，即ClusterIP:port。")]),a._v(" "),s("h4",{attrs:{id:"run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[a._v("#")]),a._v(" run")]),a._v(" "),s("p",[a._v("在集群中运行一个特定的镜像。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl run "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--image=nginx:latest")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("在创建时指定运行的命令：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl run "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--image=busybox --command -- ping example.com")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"set"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[a._v("#")]),a._v(" set")]),a._v(" "),s("p",[a._v("在对象上设置特定功能。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("滚动更新一个Deployment的容器镜像改为1.0版本：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" image deployment"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("containername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("containername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("edit")]),a._v(" "),s("p",[a._v("edit提供了另一种更新资源的操作。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("使用edit直接更新Pod的命令为：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl edit pod po"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("btv4j\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("上面命令的效果等同于：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl get pod po"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("btv4j "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o yaml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("yaml\nvim "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("yaml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/*do some changes here */")]),a._v("\nkubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("yaml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h4",{attrs:{id:"explain"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#explain"}},[a._v("#")]),a._v(" explain")]),a._v(" "),s("p",[a._v("查看文档或参考资料。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("查看Pod的相关文档：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("explain")]),a._v(" pod\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"delete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete"}},[a._v("#")]),a._v(" delete")]),a._v(" "),s("p",[a._v("根据资源名或标签删除资源。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("立刻删除该Pod：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("delete")]),a._v(" pod "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--now ")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("delete")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("yaml\nkubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("delete")]),a._v(" deployment "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"部署命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署命令"}},[a._v("#")]),a._v(" 部署命令")]),a._v(" "),s("h4",{attrs:{id:"rollout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rollout"}},[a._v("#")]),a._v(" rollout")]),a._v(" "),s("p",[a._v("管理资源的发布。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("查看指定资源的部署状态：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl rollout "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("status")]),a._v(" deployment"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("查看指定资源的发布历史：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl rollout history deployment"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("回滚指定资源，默认回滚至上一个版本：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl rollout undo deployment"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("test"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"scale"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scale"}},[a._v("#")]),a._v(" scale")]),a._v(" "),s("p",[a._v("scale用于程序在负载加重或缩小时将副本进行扩容或缩小。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl scale deployment "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--replicas=<newnumber>")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"autoscale"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#autoscale"}},[a._v("#")]),a._v(" autoscale")]),a._v(" "),s("p",[a._v("autoscale命令提供了自动根据工作负载的CPU利用率对其副本进行扩缩的功能。autoscale命令会给工作负载（Deployment、ReplicaSet、StatefulSet或ReplicationController）指定一个副本数的范围，在实际运行中根据所有Pod的平均CPU利用率自动在指定的范围内对Pod进行扩容或缩容。如果未指定目标利用率或设置为负数，将使用默认的自动扩缩策略。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl autoscale deployment "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("deployname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--min=<minnumber> --max=<maxnumber> --cpu-percent=<cpu>")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"集群管理命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群管理命令"}},[a._v("#")]),a._v(" 集群管理命令")]),a._v(" "),s("h4",{attrs:{id:"cordon、drain、uncordon"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cordon、drain、uncordon"}},[a._v("#")]),a._v(" cordon、drain、uncordon")]),a._v(" "),s("p",[a._v("有时候会遇到这样一个场景，一个节点需要升级，但是在该节点上又有许多运行的Pod，或者该节点已经瘫痪，需要保证业务功能的完善，则需要使用这组命令将该节点上运行的Pod调度到其他节点上。使用步骤如下：")]),a._v(" "),s("ol",[s("li",[a._v("使用cordon命令将一个节点标记为不可调度。这意味着新的Pod将不会被调度到该节点上。")])]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl cordon "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nodename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("CCE中<nodename>默认为节点私网IP。")]),a._v(" "),s("ul",[s("li",[a._v("使用drain命令，驱逐该节点上的Pod，将运行在该节点上运行的Pod平滑的搬迁到其他节点上。")])]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl drain "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nodename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--ignore-daemonsets --delete-emptydir-data")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("--ignore-daemonsets表示忽略DaemonSet所控制的Pod，--delete-emptydir-data表示即使存在使用emptyDir（腾空节点时将删除本地数据）的Pod也会继续腾空节点。")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("对该节点进行一些节点维护的操作，如重置节点等。")])]),a._v(" "),s("li",[s("p",[a._v("节点维护完后，使用uncordon命令解锁该节点，使其重新变得可调度。")])])]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl uncordon "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nodename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"cluster-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cluster-info"}},[a._v("#")]),a._v(" cluster-info")]),a._v(" "),s("p",[a._v("查看在集群中运行的插件：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl cluster"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("info\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("查看详细信息：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl cluster"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("info "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("dump")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"top"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#top"}},[a._v("#")]),a._v(" top")]),a._v(" "),s("p",[a._v("显示资源（CPU/Memory/Storage）使用，该命令需要集群中的Metrics Server正常运行。")]),a._v(" "),s("h4",{attrs:{id:"taint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#taint"}},[a._v("#")]),a._v(" taint")]),a._v(" "),s("p",[a._v("修改一个或多个节点上的污点。")]),a._v(" "),s("h4",{attrs:{id:"certificate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certificate"}},[a._v("#")]),a._v(" certificate")]),a._v(" "),s("p",[a._v("修改证书资源。")]),a._v(" "),s("h2",{attrs:{id:"故障诊断和调试命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#故障诊断和调试命令"}},[a._v("#")]),a._v(" 故障诊断和调试命令")]),a._v(" "),s("h4",{attrs:{id:"describe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#describe"}},[a._v("#")]),a._v(" describe")]),a._v(" "),s("p",[a._v("describe命令类似于get，同样用于获取资源的相关信息。不同的是，get获得的是定义该资源的详细信息，而describe获得的是资源在集群内相关的状态信息。describe命令同get类似，但是describe命令不支持-o选项，对于同一类型的资源，describe命令输出的信息格式，内容域相同。")]),a._v(" "),s("p",[s("strong",[a._v("说明：")])]),a._v(" "),s("p",[a._v("如果发现是查询某个资源的信息，使用get命令能够获取更加详尽的信息。但是如果想要查询某个资源的状态，如某个Pod并不是在running状态，这时需要获取更详尽的状态信息时，就应该使用describe命令。")]),a._v(" "),s("p",[a._v("kubectl describe pod <podname>")]),a._v(" "),s("h4",{attrs:{id:"logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[a._v("#")]),a._v(" logs")]),a._v(" "),s("p",[a._v("logs命令用于显示Pod运行中，容器内程序输出到标准输出的内容。如果要获得tail -f的方式，需使用-f选项。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl logs "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"exec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exec"}},[a._v("#")]),a._v(" exec")]),a._v(" "),s("p",[a._v("与Docker的exec用法相似，如果一个Pod中，有多个容器，需要使用-c选项指定容器。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("it "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- bash")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("it "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("containername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- bash")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"port-forward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#port-forward"}},[a._v("#")]),a._v(" port-forward")]),a._v(" "),s("p",[a._v("转发一个或多个本地端口至一个Pod。")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[a._v("侦听本地端口5000并转发到<my-deployment>创建的Pod里的端口6000：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("forward deploy"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("my"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("deployment "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(":"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6000")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"cp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cp"}},[a._v("#")]),a._v(" cp")]),a._v(" "),s("p",[a._v("复制文件或目录到容器：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl cp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("foo "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("bar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("containername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("将/tmp/foo本地文件复制到远程Pod中特定容器的/tmp/bar下。")]),a._v(" "),s("h4",{attrs:{id:"auth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#auth"}},[a._v("#")]),a._v(" auth")]),a._v(" "),s("p",[a._v("检查授权。")]),a._v(" "),s("h4",{attrs:{id:"attach"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attach"}},[a._v("#")]),a._v(" attach")]),a._v(" "),s("p",[a._v("attach命令效果类似于logs -f，退出查看使用ctrl-c。如果一个Pod中有多个容器，要查看具体的某个容器的输出，需要在Pod名后使用-c containername指定运行的容器。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl attach "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("containername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"高级命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高级命令"}},[a._v("#")]),a._v(" 高级命令")]),a._v(" "),s("h4",{attrs:{id:"replace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replace"}},[a._v("#")]),a._v(" replace")]),a._v(" "),s("p",[a._v("replace命令用于对已有资源进行更新、替换。当需要更新资源的一些属性的时候，如果修改副本数量，增加、修改标签，更改镜像版本，修改端口等，都可以直接修改原YAML文件，然后执行replace命令。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("须知：")])]),a._v(" "),s("p",[a._v("资源名称不能被更新。")]),a._v(" "),s("h4",{attrs:{id:"apply"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apply"}},[a._v("#")]),a._v(" apply")]),a._v(" "),s("p",[a._v("apply命令提供了比patch，edit等更严格的更新资源的方式。通过apply，用户可以将资源的configuration使用source control的方式维护在版本库中。每次有更新时，将配置文件推送server，然后使用kubectl apply将更新应用到资源。Kubernetes会在应用更新前将当前配置文件中的配置同已经应用的配置做比较，并只更新更改的部分，而不会主动更改任何用户未指定的部分。apply命令的使用方式同replace相同，不同的是，apply不会删除原有资源，然后创建新的。apply直接在原有资源的基础上进行更新。同时kubectl apply还会在资源中添加一条注释，标记当前的apply，类似于git操作。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("apply")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("f "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"patch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#patch"}},[a._v("#")]),a._v(" patch")]),a._v(" "),s("p",[a._v("如果一个容器已经在运行，这时需要对一些容器属性进行修改，又不想删除容器，或不方便通过replace的方式进行更新。Kubernetes还提供了一种在容器运行时，直接对容器进行修改的方式，就是patch命令。 例如已存在一个Pod的标签为app=nginx1，如果需要在运行过程中，将其修改为app=nginx2。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl patch pod "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"metadata":{"labels":{"app":"nginx2"}}}\'')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"convert"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#convert"}},[a._v("#")]),a._v(" convert")]),a._v(" "),s("p",[a._v("不同的API版本之间转换配置文件。")]),a._v(" "),s("h2",{attrs:{id:"设置命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置命令"}},[a._v("#")]),a._v(" 设置命令")]),a._v(" "),s("h4",{attrs:{id:"label"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#label"}},[a._v("#")]),a._v(" label")]),a._v(" "),s("p",[a._v("更新资源上的标签：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl label pods my"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("pod new"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("label"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("newlabel\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"annotate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#annotate"}},[a._v("#")]),a._v(" annotate")]),a._v(" "),s("p",[a._v("更新资源上的注释：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl annotate pods my"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("pod icon"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http:"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//*****")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"completion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#completion"}},[a._v("#")]),a._v(" completion")]),a._v(" "),s("p",[a._v("用于实现kubectl工具自动补全。")]),a._v(" "),s("h2",{attrs:{id:"其他命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他命令"}},[a._v("#")]),a._v(" 其他命令")]),a._v(" "),s("h4",{attrs:{id:"api-versions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-versions"}},[a._v("#")]),a._v(" api-versions")]),a._v(" "),s("p",[a._v("打印受支持的API版本：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl api"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("versions\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"api-resources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-resources"}},[a._v("#")]),a._v(" api-resources")]),a._v(" "),s("p",[a._v("打印支持的API资源：")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl api"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("resources\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[a._v("#")]),a._v(" config")]),a._v(" "),s("p",[a._v("修改kubeconfig文件：用于访问API，比如配置认证信息。")]),a._v(" "),s("h4",{attrs:{id:"help"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#help"}},[a._v("#")]),a._v(" help")]),a._v(" "),s("p",[a._v("所有命令帮助。")]),a._v(" "),s("h4",{attrs:{id:"version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[a._v("#")]),a._v(" version")]),a._v(" "),s("p",[a._v("打印客户端和服务版本信息。")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("kubectl version\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("Reward")],1)}),[],!1,null,null,null);s.default=r.exports}}]);